<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tungsten Client</title>
  <link rel="icon" type="image/png" href="/icons/Tungsten-512x512.png">
</head>
<body>
  <div class="card">
    <h1>Tungsten Client</h1>
    <p class="muted">Backend is running and can serve static files. This page is a placeholder for the HTML/CSS/JS frontend.</p>

    <div class="row">
      <input id="endpoint" value="/health" aria-label="endpoint" />
      <button id="btn">Test</button>
    </div>
    <pre id="out" style="white-space: pre-wrap; margin-top: 1rem;">Ready.</pre>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);
    $('#btn').addEventListener('click', async () => {
      const ep = $('#endpoint').value || '/health';
      $('#out').textContent = 'Requesting ' + ep + '...';
      try {
        const r = await fetch(ep, { credentials: 'include' });
        const t = await r.text();
        const isJson = (r.headers.get('content-type')||'').includes('application/json');
        $('#out').textContent = isJson ? JSON.stringify(JSON.parse(t), null, 2) : t;
        if (r.ok) {
          console.log('OK');
        } else {
          console.warn('HTTP ' + r.status);
        }
      } catch (e) {
        $('#out').textContent = 'Error: ' + e.message;
      }
    });
  </script>
</body>
</html>
